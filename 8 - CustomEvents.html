<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.5/dist/cdn.min.js"></script>
    <script src="https://cdn.tailwindcss.com" rel="stylesheet"></script>
    <title>8 - Handling Custom Events</title>
</head>

<!-- 
    1. Button calls global function flash
    2. flash then calls transition message
-->

<body class="p-12">

    <!-- Second alpine component -->
    <div x-data>
        <button @click="flash('Hello There')">Trigger flash message</button>
    </div>

    <hr>
    <!-- First alpine component -->
    <!-- Flash -->
    <!-- In console type in flash("Message here") -->
    <div 
        x-data="{ show: false, message: '' }"
        x-show="show" 
        x-transition.opacity.scale.75.duration.3000ms
        @flash.window="
            show = true; 
            message = $event.detail;
            setTimeout(() => show = false, 3000);
            "
        x-text="message"
        class="fixed bottom-0 right-0 mb-4 mr-4 bg-blue-500 text-white p-4 rounded"
    >
    </div>


    <script>
        window.flash = message => window.dispatchEvent(new CustomEvent('flash', { detail:message }));
    </script>

</body>
</html>